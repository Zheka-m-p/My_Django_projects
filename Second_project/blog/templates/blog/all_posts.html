<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í—Å–µ –ø–æ—Å—Ç—ã</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f0f8ff;
        }
        .card {
            background-color: #e9ecef;
            border: 1px solid #b0c4de;
        }
    </style>
</head>
<body>
{% include 'main/includes/main_navbar.html' %}
<div class="container mt-3">
    <!-- üîπ –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
    <a href="{% url 'blog:home' %}" class="btn btn-outline-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>
<div class="container mt-4">
    <!-- üîπ –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <form method="GET" class="mb-4">
        <div class="row g-3">
            <div class="col-md-4">
                <input type="text" name="title" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." value="{{ request.GET.title }}">
            </div>
            <div class="col-md-4">
                <input type="text" name="author" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä—É..." value="{{ request.GET.author }}">
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">–ù–∞–π—Ç–∏</button>
            </div>
            <div class="col-md-2">
                <!-- üîπ –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" -->
                <a href="{% url 'blog:all_posts' %}" class="btn btn-outline-secondary w-100">–°–±—Ä–æ—Å–∏—Ç—å</a>
            </div>
        </div>
    </form>

    <h1 class="mb-4">–≤—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</h1>
    {% for post in posts %}
    <div class="card mb-3">
        <div class="card-body">
            <h2 class="card-title">{{ post.title }}</h2>
            <p class="card-text">{{ post.content|truncatewords:20 }}</p>
            <small class="text-muted">–ê–≤—Ç–æ—Ä: {{ post.author }}, {{ post.created_at|date:"j E Y –≥. H:i" }}
                <a href="{% url 'blog:solo_post' post.pk %}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ...</a> |

                {# ‚úÖ –ü–†–û–í–ï–†–ö–ê: –õ–æ–≥–∏–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π #}
                {% if user == post.author %}
                    <a href="{% url 'blog:all_post_by_one_author' post.author.pk %}">–≤—Å–µ –º–æ–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</a>
                {% else %}
                    <a href="{% url 'blog:all_post_by_one_author' post.author.pk %}">–≤—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∞</a>
                {% endif %}
            </small>
        </div>
    </div>
    {% endfor %}
</div>
</body>
</html>